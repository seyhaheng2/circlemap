<!DOCTYPE html>
<html>
<head>
  <title>Searchmapdavatar</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>

</head>

<body>

  <div id="map" style="width: 100%; height:600px;"></div>

  <%= yield %>

  <script type="text/javascript">

      var map = L.map('map').setView([11.5754, 104.9234], 16);
      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);      

      var circleLocation = new L.LatLng(11.5754, 104.9234),
      circleOptions = {
          color: 'red', 
          fillColor: '#f03', 
          fillOpacity: 0.3,
          extendedIconClass : 'extend-icon'
      };
      var circle = new L.CircleEditor(circleLocation, 500, circleOptions);
      map.addLayer(circle);
      circle.bindPopup('I am a circle');
      circleOptions = {
          color: 'red', 
          fillColor: 'yellow', 
          fillOpacity: 0.7,
          extendedIconClass : ''
      };

      circle.on('edit', function() {
              console.log('Circle was edited!');
      });
      circle.on('centerchange', function() {
        console.log('the circle has moved.'+circleLocation);
      });
      circle.on('radiuschange', function() {
        console.log('the radius has chahged to: ' + this._mRadius);
      });







var polygonDrawer = new L.Draw.Polyline(map);

// Assumming you have a Leaflet map accessible
map.on('draw:created', function (e) {
    var type = e.layerType,
        layer = e.layer;

    // Do whatever you want with the layer.
    // e.type will be the type of layer that has been draw (polyline, marker, polygon, rectangle, circle)
    // E.g. add it to the map
    layer.addTo(map);
});

// Click handler for you button to start drawing polygons
$('#draw_poly').click(function() {
    polygonDrawer.enable();
});




  </script>

</body>
</html>
